(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d2f8228c"],{"1ffa":function(e,t,c){"use strict";c("920a")},"920a":function(e,t,c){},9387:function(e,t,c){},a15b:function(e,t,c){"use strict";var n=c("23e7"),o=c("44ad"),a=c("fc6a"),r=c("a640"),s=[].join,i=o!=Object,l=r("join",",");n({target:"Array",proto:!0,forced:i||!l},{join:function(e){return s.call(a(this),void 0===e?",":e)}})},b4f5:function(e,t,c){"use strict";c("9387")},f736:function(e,t,c){"use strict";c.r(t);c("b680"),c("a9e3");var n=c("7a23"),o=Object(n["N"])("data-v-5b1ace2a");Object(n["A"])("data-v-5b1ace2a");var a={class:"list"},r={class:"item"},s={class:"title flex"},i={class:"flex-item"},l={key:1,class:"status"},b={key:0,class:"c-2FBBA1"},u={key:1,class:"c-D4566C"},d={key:2,class:"status c-D4566C"},O={class:"flex row"},j=Object(n["i"])("div",{class:"label"},"委托周期：",-1),f={class:"flex-item cont"},p={class:"flex row"},h=Object(n["i"])("div",{class:"label"},"委托金额：",-1),m={class:"flex-item cont"},k={key:0,class:"c-D4566C"},x={key:1,class:"c-2FBBA1"},v={class:"flex row"},w=Object(n["i"])("div",{class:"label"},"资金变化：",-1),B={key:0,class:"flex-item cont"},g={class:"c-2FBBA1"},C={key:1,class:"flex-item cont"},A={class:"c-2FBBA1"},y={key:2,class:"flex-item cont"},F={class:"c-2FBBA1"},D={key:1,class:"flex-item cont"},I=Object(n["i"])("span",{class:"c-2FBBA1"},"*******",-1),P={key:3,class:"flex-item",style:{"text-align":"right"}},S=Object(n["i"])("span",{class:"c-2FBBA1"},"等待开奖",-1),N={key:0,class:"footer-handle flex-between"},T=Object(n["h"])("全选"),H=Object(n["h"])("确认开奖");Object(n["y"])();var L=o((function(e,t,c,L,M,R){var U=Object(n["E"])("van-nav-bar"),E=Object(n["E"])("van-checkbox"),V=Object(n["E"])("van-checkbox-group"),_=Object(n["E"])("van-button");return Object(n["x"])(),Object(n["f"])("div",{class:["container bg-container",{mb60:e.showSelect}],id:"listIndexPage"},[Object(n["i"])(U,{"left-arrow":"",title:"期权委托记录","right-text":"",onClickLeft:e.$goBack,onClickRight:t[1]||(t[1]=function(t){return e.showSelect=!e.showSelect})},null,8,["onClickLeft"]),Object(n["i"])("div",a,[Object(n["i"])(V,{modelValue:e.selectIds,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.selectIds=t}),ref:"checkboxGroup"},{default:o((function(){return[(Object(n["x"])(!0),Object(n["f"])(n["a"],null,Object(n["D"])(e.records,(function(t){return Object(n["x"])(),Object(n["f"])("div",r,[Object(n["i"])("div",s,[e.showSelect?(Object(n["x"])(),Object(n["f"])(E,{key:0,name:"1","checked-color":"#FBA10C"})):Object(n["g"])("",!0),Object(n["i"])("div",i,"BETH "+Object(n["H"])(Number(t.busdPerBeth/Math.pow(10,10)).toFixed(3))+"-"+Object(n["H"])(t.isOpen?Number(t.openPrice/Math.pow(10,10)).toFixed(3):"*****")+"BUSD",1),t.isOpen&&t.openPrice!=t.busdPerBeth?(Object(n["x"])(),Object(n["f"])("div",l,[t.openPrice-t.busdPerBeth>0?(Object(n["x"])(),Object(n["f"])("span",b,"涨")):(Object(n["x"])(),Object(n["f"])("span",u,"跌"))])):Object(n["g"])("",!0),t.isOpen&&t.openPrice==t.busdPerBeth?(Object(n["x"])(),Object(n["f"])("div",d,"返回本金")):Object(n["g"])("",!0)]),Object(n["i"])("div",O,[j,Object(n["i"])("div",f,Object(n["H"])(t.openBlock-t.investBlock)+"个区块("+Object(n["H"])(t.minute)+"分钟)",1)]),Object(n["i"])("div",p,[h,Object(n["i"])("div",m,[Object(n["h"])(Object(n["H"])(t.investAmount)+"BUSD ",1),0==t.investType?(Object(n["x"])(),Object(n["f"])("span",k,"看跌")):(Object(n["x"])(),Object(n["f"])("span",x,"看涨"))])]),Object(n["i"])("div",v,[w,t.isOpen?(Object(n["x"])(),Object(n["f"])(n["a"],{key:0},[t.income?(Object(n["x"])(),Object(n["f"])("div",B,[Object(n["i"])("span",g,"+"+Object(n["H"])(t.income)+"BUSD",1)])):t.busdPerBeth==t.openPrice?(Object(n["x"])(),Object(n["f"])("div",C,[Object(n["i"])("span",A,"+"+Object(n["H"])(t.investAmount)+"BUSD",1)])):Object(n["g"])("",!0),t.windIncome?(Object(n["x"])(),Object(n["f"])("div",y,[Object(n["i"])("span",F,"+"+Object(n["H"])(t.windIncome)+"WIND",1)])):Object(n["g"])("",!0)],64)):(Object(n["x"])(),Object(n["f"])("div",D,[I])),t.canOpen?(Object(n["x"])(),Object(n["f"])("div",{key:2,class:"btn",onClick:function(c){return e.openOrder(t.id)}},"开奖",8,["onClick"])):Object(n["g"])("",!0),t.canOpen||t.isOpen?Object(n["g"])("",!0):(Object(n["x"])(),Object(n["f"])("div",P,[S]))])])})),256))]})),_:1},8,["modelValue"])]),e.showSelect?(Object(n["x"])(),Object(n["f"])("div",N,[Object(n["i"])(E,{onChange:e.checkAllFun,modelValue:e.checkAll,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.checkAll=t}),"checked-color":"#FBA10C"},{default:o((function(){return[T]})),_:1},8,["onChange","modelValue"]),Object(n["i"])(_,{round:"",type:"primary",color:"#FBA10C",onClick:e.onSubmitLottery},{default:o((function(){return[H]})),_:1},8,["onClick"])])):Object(n["g"])("",!0)],2)})),M=c("5530"),R=c("1da1"),U=(c("96cf"),c("a15b"),c("159b"),c("d9d1")),E=c("722f"),V=c("fb9e"),_=c("01ea"),W=c("5502"),G={setup:function(){var e=Object(W["b"])(),t=Object(n["B"])({selectIds:[],showSelect:!1,checkboxGroup:null,checkAll:!1,records:[],address:Object(n["d"])((function(){return e.state.accounts[0]})),web3:Object(n["d"])((function(){return e.state.provider})),BsnContract:null,BusdContract:null,windTokenContract:null,BsnDataContract:null,checkAllFun:function(e){console.log(t.checkAll),t.checkboxGroup.toggleAll(e)},onSubmitLottery:function(){var e=t.selectIds.join(",");console.log(e)},initContract:function(){t.BsnContract=new t.web3.eth.Contract(U,_["a"].BsnAddress),t.BusdContract=new t.web3.eth.Contract(E,_["a"].BusdAddress),t.BsnDataContract=new t.web3.eth.Contract(V,_["a"].BsnDataAddress),t.windTokenContract=new t.web3.eth.Contract(E,_["a"].windToken),t.initData()},initData:function(){t.getList()},getList:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(){var c,n,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.records=[],e.next=3,t.BsnDataContract.methods.getUserInfo(t.address).call();case 3:return c=e.sent,e.next=6,t.web3.eth.getBlockNumber();case 6:return n=e.sent,e.next=9,t.BusdContract.methods.decimals().call();case 9:return o=e.sent,e.next=12,t.windTokenContract.methods.decimals().call();case 12:a=e.sent,c._recordIds.forEach(function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(c){var r,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.BsnDataContract.methods.getOrderById(c).call();case 2:return r=e.sent,e.next=5,t.BsnContract.methods.getBlockPrice(r.openBlock).call();case 5:return s=e.sent,e.next=8,t.BsnContract.methods.getWin(c).call();case 8:i=e.sent,console.log(i),s>0&&n>=r.openBlock&&!r.isOpen&&(r.canOpen=!0),s>0&&n>=r.openBlock&&(i.back>0?(r.income=Number(i.back/Math.pow(10,o)).toFixed(2),r.windIncome=Number(8*i.winTokenAmount/Math.pow(10,a)/9).toFixed(2),r.isWin=!0):(r.income=Number(i.back/Math.pow(10,a)).toFixed(2),r.windIncome=Number(8*i.winTokenAmount/Math.pow(10,a)/9).toFixed(2),r.isWin=!1)),s<=0&&(r.canOpen=!1),console.log(r),r.id=c,r.openPrice=s,r.investAmount=Number(r.investAmount/Math.pow(10,o)).toFixed(2),t.records.unshift(r),t.records=t.records.sort((function(e,t){return t.investTime-e.investTime}));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)})));function c(){return e.apply(this,arguments)}return c}(),openOrder:function(){var e=Object(R["a"])(regeneratorRuntime.mark((function e(c){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.BsnContract.methods.openAward(c).send({from:t.address});case 2:t.getList();case 3:case"end":return e.stop()}}),e)})));function c(t){return e.apply(this,arguments)}return c}()});t.address&&t.initContract(),Object(n["L"])((function(){return t.address}),(function(e){e&&t.initContract()}));var c=Object(n["I"])(t);return Object(M["a"])({},c)}};c("b4f5"),c("1ffa");G.render=L,G.__scopeId="data-v-5b1ace2a";t["default"]=G}}]);
//# sourceMappingURL=chunk-d2f8228c.2b3aa8da.js.map
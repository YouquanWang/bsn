(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5bf95a48"],{7439:function(e,t,n){},"7fbf":function(e,t,n){},a15b:function(e,t,n){"use strict";var c=n("23e7"),o=n("44ad"),r=n("fc6a"),a=n("a640"),s=[].join,i=o!=Object,l=a("join",",");c({target:"Array",proto:!0,forced:i||!l},{join:function(e){return s.call(r(this),void 0===e?",":e)}})},b5d8:function(e,t,n){"use strict";n("7439")},e334:function(e,t,n){"use strict";n("7fbf")},f736:function(e,t,n){"use strict";n.r(t);n("b680"),n("a9e3");var c=n("7a23"),o=Object(c["N"])("data-v-5ae4eead");Object(c["A"])("data-v-5ae4eead");var r={class:"list"},a={class:"item"},s={class:"title flex"},i={class:"flex-item"},l={key:1,class:"status c-D4566C"},u={key:2,class:"status c-D4566C"},b={key:3,class:"status c-D4566C"},d={class:"flex row"},O=Object(c["i"])("div",{class:"label"},"委托周期：",-1),j={class:"flex-item cont"},f={class:"flex row"},p=Object(c["i"])("div",{class:"label"},"委托金额：",-1),h={class:"flex-item cont"},m={class:"c-2FBBA1"},v={class:"flex row"},w=Object(c["i"])("div",{class:"label"},"资金变化：",-1),k={key:0,class:"flex-item cont"},x={class:"c-2FBBA1"},B={key:1,class:"flex-item cont"},g={class:"c-2FBBA1"},C={key:2,class:"flex-item cont"},A={class:"c-2FBBA1"},y={key:4,class:"flex-item"},F=Object(c["i"])("span",{class:"c-2FBBA1"},"等待开奖",-1),P={key:0,class:"footer-handle flex-between"},D=Object(c["h"])("全选"),I=Object(c["h"])("确认开奖");Object(c["y"])();var H=o((function(e,t,n,H,S,N){var T=Object(c["E"])("van-nav-bar"),L=Object(c["E"])("van-checkbox"),M=Object(c["E"])("van-checkbox-group"),R=Object(c["E"])("van-button");return Object(c["x"])(),Object(c["f"])("div",{class:["container bg-container",{mb60:e.showSelect}],id:"listIndexPage"},[Object(c["i"])(T,{"left-arrow":"",title:"期权委托记录","right-text":"",onClickLeft:e.$goBack,onClickRight:t[1]||(t[1]=function(t){return e.showSelect=!e.showSelect})},null,8,["onClickLeft"]),Object(c["i"])("div",r,[Object(c["i"])(M,{modelValue:e.selectIds,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.selectIds=t}),ref:"checkboxGroup"},{default:o((function(){return[(Object(c["x"])(!0),Object(c["f"])(c["a"],null,Object(c["D"])(e.records,(function(t){return Object(c["x"])(),Object(c["f"])("div",a,[Object(c["i"])("div",s,[e.showSelect?(Object(c["x"])(),Object(c["f"])(L,{key:0,name:"1","checked-color":"#FBA10C"})):Object(c["g"])("",!0),Object(c["i"])("div",i,"BETH "+Object(c["H"])(Number(t.busdPerBeth/Math.pow(10,10)).toFixed(3))+"-"+Object(c["H"])(Number(t.openPrice/Math.pow(10,10)).toFixed(3))+"BUSD",1),t.isOpen&&0==t.investType&&t.openPrice!=t.busdPerBeth?(Object(c["x"])(),Object(c["f"])("div",l,Object(c["H"])(t.openPrice-t.busdPerBeth>0?"错误":"正确"),1)):Object(c["g"])("",!0),t.isOpen&&t.openPrice==t.busdPerBeth?(Object(c["x"])(),Object(c["f"])("div",u,"返回本金")):Object(c["g"])("",!0),t.isOpen&&1==t.investType&&t.openPrice!=t.busdPerBeth?(Object(c["x"])(),Object(c["f"])("div",b,Object(c["H"])(t.openPrice-t.busdPerBeth>0?"正确":"错误"),1)):Object(c["g"])("",!0)]),Object(c["i"])("div",d,[O,Object(c["i"])("div",j,Object(c["H"])(t.openBlock-t.investBlock)+"个区块("+Object(c["H"])(t.minute)+"分钟)",1)]),Object(c["i"])("div",f,[p,Object(c["i"])("div",h,[Object(c["h"])(Object(c["H"])(t.investAmount)+"BUSD ",1),Object(c["i"])("span",m,Object(c["H"])(0==t.investType?"看跌":"看涨"),1)])]),Object(c["i"])("div",v,[w,t.income?(Object(c["x"])(),Object(c["f"])("div",k,[Object(c["i"])("span",x,"+"+Object(c["H"])(t.income)+"BUSD",1)])):t.busdPerBeth==t.openPrice?(Object(c["x"])(),Object(c["f"])("div",B,[Object(c["i"])("span",g,"+"+Object(c["H"])(t.investAmount)+"BUSD",1)])):Object(c["g"])("",!0),t.windIncome?(Object(c["x"])(),Object(c["f"])("div",C,[Object(c["i"])("span",A,"+"+Object(c["H"])(t.windIncome)+"WIND",1)])):Object(c["g"])("",!0),t.canOpen?(Object(c["x"])(),Object(c["f"])("div",{key:3,class:"btn",onClick:function(n){return e.openOrder(t.id)}},"开奖",8,["onClick"])):Object(c["g"])("",!0),t.canOpen||t.isOpen?Object(c["g"])("",!0):(Object(c["x"])(),Object(c["f"])("div",y,[F]))])])})),256))]})),_:1},8,["modelValue"])]),e.showSelect?(Object(c["x"])(),Object(c["f"])("div",P,[Object(c["i"])(L,{onChange:e.checkAllFun,modelValue:e.checkAll,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.checkAll=t}),"checked-color":"#FBA10C"},{default:o((function(){return[D]})),_:1},8,["onChange","modelValue"]),Object(c["i"])(R,{round:"",type:"primary",color:"#FBA10C",onClick:e.onSubmitLottery},{default:o((function(){return[I]})),_:1},8,["onClick"])])):Object(c["g"])("",!0)],2)})),S=n("5530"),N=n("1da1"),T=(n("96cf"),n("a15b"),n("159b"),n("d9d1")),L=n("722f"),M=n("fb9e"),R=n("01ea"),U=n("5502"),E={setup:function(){var e=Object(U["b"])(),t=Object(c["B"])({selectIds:[],showSelect:!1,checkboxGroup:null,checkAll:!1,records:[],address:Object(c["d"])((function(){return e.state.accounts[0]})),web3:Object(c["d"])((function(){return e.state.provider})),BsnContract:null,BusdContract:null,windTokenContract:null,BsnDataContract:null,checkAllFun:function(e){console.log(t.checkAll),t.checkboxGroup.toggleAll(e)},onSubmitLottery:function(){var e=t.selectIds.join(",");console.log(e)},initContract:function(){t.BsnContract=new t.web3.eth.Contract(T,R["a"].BsnAddress),t.BusdContract=new t.web3.eth.Contract(L,R["a"].BusdAddress),t.BsnDataContract=new t.web3.eth.Contract(M,R["a"].BsnDataAddress),t.windTokenContract=new t.web3.eth.Contract(L,R["a"].windToken),t.initData()},initData:function(){t.getList()},getList:function(){var e=Object(N["a"])(regeneratorRuntime.mark((function e(){var n,c,o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.BsnDataContract.methods.getUserInfo(t.address).call();case 2:return n=e.sent,e.next=5,t.web3.eth.getBlockNumber();case 5:return c=e.sent,e.next=8,t.BusdContract.methods.decimals().call();case 8:return o=e.sent,e.next=11,t.windTokenContract.methods.decimals().call();case 11:r=e.sent,console.log(n),n._recordIds.forEach(function(){var e=Object(N["a"])(regeneratorRuntime.mark((function e(n){var a,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.BsnDataContract.methods.getOrderById(n).call();case 2:return a=e.sent,e.next=5,t.BsnContract.methods.getBlockPrice(a.openBlock).call();case 5:return s=e.sent,e.next=8,t.BsnContract.methods.getWin(n).call();case 8:i=e.sent,console.log(i),s>0&&c>=a.openBlock&&!a.isOpen&&(a.canOpen=!0),s>0&&c>=a.openBlock&&(i.back>0?(a.income=Number(i.back/Math.pow(10,o)).toFixed(2),a.windIncome=Number(8*i.winTokenAmount/Math.pow(10,r)/9).toFixed(2),a.isWin=!0):(a.income=Number(i.back/Math.pow(10,r)).toFixed(2),a.windIncome=Number(8*i.winTokenAmount/Math.pow(10,r)/9).toFixed(2),a.isWin=!1)),s<=0&&(a.canOpen=!1),console.log(a),a.id=n,a.openPrice=s,a.investAmount=Number(a.investAmount/Math.pow(10,o)).toFixed(2),t.records.unshift(a);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)})));function n(){return e.apply(this,arguments)}return n}(),openOrder:function(){var e=Object(N["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.BsnContract.methods.openAward(n).send({from:t.address});case 2:case"end":return e.stop()}}),e)})));function n(t){return e.apply(this,arguments)}return n}()});t.address&&t.initContract(),Object(c["L"])((function(){return t.address}),(function(e){e&&t.initContract()}));var n=Object(c["I"])(t);return Object(S["a"])({},n)}};n("b5d8"),n("e334");E.render=H,E.__scopeId="data-v-5ae4eead";t["default"]=E}}]);
//# sourceMappingURL=chunk-5bf95a48.028bdcba.js.map